{% extends "accounts/base.html" %}
{% load i18n %}
{% load countries %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
{% get_countries as countries %}
<link rel="stylesheet" href="{% static 'flags/sprite.css' %}">
<!-- <img class="m-1" src="/static/flags/{{ country.code|lower }}.gif" alt="" style="width: 25px; height: 15px;"> -->

<div class="card text-white zarathus-card mx-auto">
    <div class="card-body">
        <h3 class="fw-normal text-center">{% trans "Please Choose a Country." %}</h3>
        <hr>
        <!-- <div class="btn-group">
            {% if default_country_code != None %}
                <button type="submit" class="btn btn-secondary" value="{{ default_country_code }}" name="country-picker">
                    <img class="m-1" src="/static/flags/{{ default_country_code|lower }}.gif" alt="" 
                        style="width: 25px; height: 15px;"><span style="color: white;">{{ default_country }}</span> 
                </button>
            {% else %}
                <button type="submit" class="btn btn-secondary" value="{{ default_country_code }}" name="country-picker">
                    <i class="bi bi-flag m-1"></i> <span style="color: white;">Select a Country</span> 
                </button>
            {% endif %}
            <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-expanded="false">
              <span class="sr-only">Toggle Dropdown</span>
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Separated link</a>
            </div>
          </div> -->
        <form method="POST">
            {% csrf_token %}
            <div class="dropdown">
                <button class="btn btn-secondary btn-lg dropdown-toggle w-100" type="submit" id="dropdownMenuButton" 
                    data-bs-toggle="dropdown" aria-bs-haspopup="true" aria-bs-expanded="false">
                    {% if default_country_code != None %}
                        <!-- <img class="m-1" src="/static/flags/{{ default_country_code|lower }}.gif" alt="" style="width: 25px; height: 15px;"><span style="color: white;">{{ default_country }}</span>  -->
                        <span class="flag-icon flag-icon-{{ default_country_code|lower }} me-2"></span>{{ default_country }}
                    {% else %}
                        <i class="bi bi-flag m-1"></i> <span style="color: white;">Select a Country</span> 
                    {% endif %}
                </button>
                
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    {% for country in countries %}
                        <button type="submit" class="dropdown-item" value="{{ country.code }}" name="country-picker">
                            <!-- <img class="m-1" src="/static/flags/{{ country.code|lower }}.gif" alt="" style="width: 25px; height: 15px;">{{ country.name }} -->
                            <span class="flag-icon flag-icon-{{ country.code|lower }} me-2"></span>{{ country.name }}
                        </button>
                    {% endfor %}
                </div>
            </div>
        </form> 
        <br>
        <div class="boarder-top">
            <small class="text-white" style="font-size: 9.5pt;">
                {% trans "Already Have An Acount ?" %} 
                <a class="ml-2" href="{% url 'login-view' %}" style="color: #f8b119;">{% trans "Log In" %}</a>
            </small>
        </div>
    </div>
</div>

{% endblock content %}
